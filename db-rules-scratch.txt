rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
		match /scenarios/{scenario} {
    allow write: if request.auth != null
    allow read: if true;
  //  	if resource.data.private == false || 
    //  (request.auth != null && request.auth.uid == resource.data.owner)
  	
    match /keywords/{keyword} {
    allow read:
    	if get(/databases/$(database)/documents/scenarios/$(scenario)).data.private == false ||
      request.auth != null &&
      get(/databases/$(database)/documents/scenarios/$(scenario)).data.owner == request.auth.uid
    }
   }
  	match /users/{user} {
    allow read, write: if true
    }
  }	
}
